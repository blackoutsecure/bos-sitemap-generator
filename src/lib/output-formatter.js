/**
 * Blackout Secure Sitemap Generator
 * Copyright ¬© 2025-2026 Blackout Secure
 * SPDX-License-Identifier: Apache-2.0
 *
 * Output formatting utilities for console logging
 */

const {
  getCopyrightNotice,
  getProjectTitle,
  getRepositoryUrl,
  getSupportUrl,
} = require('./project-config');

const DIVIDER = '‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ';

/**
 * Print application header
 * @param {object} core - GitHub Actions core module
 */
function printHeader(core) {
  core.info(DIVIDER);
  core.info(getProjectTitle());
  core.info(DIVIDER);
  core.info(getCopyrightNotice());
  core.info(getRepositoryUrl());
  core.info(getSupportUrl());
  core.info(DIVIDER);
}

/**
 * Print application footer
 * @param {object} core - GitHub Actions core module
 * @param {string} [sponsorName] - Optional sponsor/company name to display
 */
function printFooter(core, sponsorName) {
  if (sponsorName) {
    core.info(`\n‚ú® Sitemap generated by ${sponsorName}`);
  }

  core.info(DIVIDER);
  core.info('‚úÖ Sitemap generation complete!');
  core.info(DIVIDER);
  core.info(getCopyrightNotice());
  core.info(getRepositoryUrl());
  core.info(DIVIDER);
}

/**
 * Print section header
 * @param {object} core - GitHub Actions core module
 * @param {string} emoji - Section emoji
 * @param {string} title - Section title
 * @param {string} status - Status: 'Enabled', 'Disabled', or custom
 */
function printSectionHeader(core, emoji, title, status = null) {
  core.info('');
  if (status) {
    core.info(`${emoji} ${title}: ${status}`);
  } else {
    core.info(`${emoji} ${title}:`);
  }
}

/**
 * Print section start message
 * @param {object} core - GitHub Actions core module
 * @param {string} message - Start message
 */
function printSectionStart(core, message) {
  core.info(`   üöÄ ${message}`);
}

/**
 * Print section success message
 * @param {object} core - GitHub Actions core module
 * @param {string} message - Success message
 */
function printSectionSuccess(core, message) {
  core.info(`   ‚úÖ ${message}`);
}

/**
 * Print configuration summary header
 * @param {object} core - GitHub Actions core module
 */
function printConfigHeader(core) {
  core.info(`\n${DIVIDER}`);
  core.info('‚öôÔ∏è  Configuration Summary');
  core.info(DIVIDER);
}

/**
 * Print configuration section
 * @param {object} core - GitHub Actions core module
 * @param {string} emoji - Section emoji
 * @param {string} title - Section title
 * @param {object} items - Configuration items as key-value pairs
 */
function printConfigSection(core, emoji, title, items) {
  core.info(`\n${emoji} ${title}:`);
  for (const [key, value] of Object.entries(items)) {
    core.info(`   ${key.padEnd(20)} ${value}`);
  }
}

/**
 * Print sitemap generation section
 * @param {object} core - GitHub Actions core module
 * @param {object} config - Sitemap configuration
 * @param {object} _results - Generation results (reserved for future use)
 */
function printSitemapSection(core, config, _results) {
  if (!config.generateXmlSitemap && !config.generateTxtSitemap) {
    printSectionHeader(core, 'üìù', 'Sitemap Generation', 'Disabled');
    return;
  }

  printSectionHeader(core, 'üìù', 'Sitemap Generation');

  // Configuration
  core.info('   üìã Configuration:');
  core.info(
    `      XML Sitemap:         ${config.generateXmlSitemap ? 'Enabled' : 'Disabled'}`,
  );
  core.info(
    `      TXT Sitemap:         ${config.generateTxtSitemap ? 'Enabled' : 'Disabled'}`,
  );
  core.info(
    `      Gzip Compression:    ${config.generateGzip ? 'Enabled (XML only)' : 'Disabled'}`,
  );
  core.info(`      Last Modified:       ${config.lastmodStrategy}`);
  core.info(`      Change Frequency:    ${config.changefreq || '(not set)'}`);
  core.info(`      Priority:            ${config.priority || '(not set)'}`);

  // Execution
  core.info('');
  printSectionStart(core, 'Starting sitemap generation...');

  // Results will be printed by the generation logic
}

/**
 * Print sitemap validation results
 * @param {object} core - GitHub Actions core module
 * @param {object} results - Validation results
 * @param {boolean} _strict - Strict validation mode (reserved for future use)
 */
function printSitemapValidation(core, results, _strict) {
  core.info('   üîç Validation:');

  if (results.xmlSitemap) {
    core.info(`      ‚úì Valid XML format`);
    core.info(`      ‚úì Size OK (${results.xmlSitemap.size})`);
    if (results.xmlSitemap.gzipSize) {
      core.info(`      ‚úì Gzip size OK (${results.xmlSitemap.gzipSize})`);
    }
  }

  if (results.txtSitemap) {
    core.info(`      ‚úì Valid TXT format`);
    core.info(`      ‚úì Size OK (${results.txtSitemap.size})`);
  }
}

/**
 * Print validation section header
 * @param {object} core - GitHub Actions core module
 * @param {boolean} strict - Strict validation mode
 */
function printValidationHeader(core, strict) {
  core.info('');
  core.info('üîç Validation:');
  if (strict) {
    core.info('   Mode: Strict (will fail on errors)');
  } else {
    core.info('   Mode: Standard (warnings only)');
  }
}

module.exports = {
  printHeader,
  printFooter,
  printSectionHeader,
  printSectionStart,
  printSectionSuccess,
  printConfigHeader,
  printConfigSection,
  printSitemapSection,
  printSitemapValidation,
  printValidationHeader,
};
